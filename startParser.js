const puppeteer = require("puppeteer-extra");module.exports = async function startParser(bot) {  try {    console.log('startParser');    const fs = require('fs');    const puppeteer = require('puppeteer-extra');    const StealthPlugin = require('puppeteer-extra-plugin-stealth');    puppeteer.use(StealthPlugin());    const browser = await puppeteer.launch({      headless: false,      args: ['--window-size=2400,1300',        "--no-sandbox",        "--disable-gpu",        "--enable-webgl",        "--disable-web-security"      ]    });    let message = '';    let i = 0;    setInterval(async () => {      const links = require('./db/links.json');      let link = links[i];      const page = await browser.newPage();      //await page.setRequestInterception(true);      await page.setExtraHTTPHeaders({        'user-agent': 'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/108.0.0.0 Safari/537.36',        'upgrade-insecure-requests': '1',        'accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8',        'accept-encoding': 'gzip, deflate, br',        'accept-language': 'en-US,en;q=0.9,en;q=0.8'      });      await page.setViewport({        width: 2400,        height: 1300,        deviceScaleFactor: 1,      });      await page.goto(link.link);      //await page.waitForTimeout((Math.floor(Math.random() * 12) + 5) * 1000)      await page.setDefaultNavigationTimeout(60000);      await page.click('.input.text-input.size');      const elements = await page.$x('//*[@id=\"app\"]/main/div/div[1]/div[2]/div/div[2]/div/div[2]/div[1]/div/div[1]/div/div[2]/ul/li[2]');      await elements[0].click();      await page.waitForTimeout(10000);      const itemPrices = await page.$$eval('.item-money', prices => prices.map(price => price.textContent.trim()));      const itemImageHrefs = await page.$$eval('.item-image a', links => links.map(link => link.href));      await page.close();      itemPrices.forEach((item, index) => {        itemPrices[index] = item.replace('₽', '').replace(/\s+/g, ' ').trim();      });      // Вывод значений      //console.log(itemPrices);      //console.log(itemImageHrefs);      itemPrices.forEach((item, index) => {        let obj = item.split(' ');        //console.log(JSON.stringify(obj));        let price = Number(obj[0] + obj[1]);        if (!obj[2]) obj[2] = '123';        let cashback = (obj[2]).includes('%') ? Number(obj[2].replace('%', '')) : 0;        if (cashback && price <= link.price && cashback >= link.cashback) {          bot.sendMessage(-1002028596063, `❗️${itemImageHrefs[index]} ❗️\n Стоимость: ${price}₽\nКешбек: ${cashback}% (${obj[3]}₽)`, {            disable_web_page_preview: true          });        }      });    }, 60000);  } catch (e) {    console.log("Something went wrong: " + e.name);  }}